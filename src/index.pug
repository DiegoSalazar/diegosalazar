doctype html
html(lang="en" class="dark")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title= `${cv.basics.name} | ${cv.basics.label}`
    link(rel="stylesheet", href="styles.css")
    link(rel="stylesheet", href="/diegosalazar/src/custom.css")
    link(rel="preconnect", href="https://fonts.googleapis.com")
    link(rel="preconnect", href="https://fonts.gstatic.com", crossorigin)
    link(href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Montserrat:wght@700&display=swap", rel="stylesheet")

  body(class="bg-gray-900 text-gray-100 font-sans")
    //- Sticky Section Header (Animated, only for < 1536px and only after hero is out of view)
    div#sticky-section-header(class="fixed top-0 left-0 w-full z-40 pointer-events-none transition-all duration-500 ease-in-out opacity-0 translate-y-[-100%] bg-gradient-to-b from-blue-900/90 to-transparent backdrop-blur-md shadow-lg 2xl:hidden")
      h2(class="text-xl md:text-2xl font-bold tracking-tight text-white px-6 py-3 mx-auto max-w-4xl transition-all duration-500 ease-in-out")
        |
    //- Table of Contents (Wide screens only, only after hero is out of view)
    aside#toc(class="hidden 2xl:flex flex-col fixed top-32 left-0 z-30 w-60 px-4 py-6 h-[70vh] bg-gradient-to-br from-gray-900/80 via-gray-900/60 to-transparent border-r-2 border-gray-800/60 shadow-none rounded-r-xl gap-2 opacity-0 pointer-events-none transition-opacity duration-500 backdrop-blur-md invisible" style="animation:none;")
      h3(class="text-base font-bold text-blue-400 mb-3 tracking-wide uppercase opacity-80") Table of Contents
      ul(class="flex flex-col gap-1 text-gray-300 text-base font-medium")
        li
          a(href="#about" data-section="about" class="toc-link px-2 py-1 rounded transition-colors duration-300 relative") About Me
        li
          a(href="#experience" data-section="experience" class="toc-link px-2 py-1 rounded transition-colors duration-300 relative") Experience
        li
          a(href="#projects" data-section="projects" class="toc-link px-2 py-1 rounded transition-colors duration-300 relative") Personal Projects
        li
          a(href="#volunteer" data-section="volunteer" class="toc-link px-2 py-1 rounded transition-colors duration-300 relative") Volunteer
        li
          a(href="#testimonials" data-section="testimonials" class="toc-link px-2 py-1 rounded transition-colors duration-300 relative") Testimonials
        li
          a(href="#contact" data-section="contact" class="toc-link px-2 py-1 rounded transition-colors duration-300 relative") Contact
    //- Header & Hero Section
    header#home(class="bg-gradient-to-b from-blue-900 via-blue-800/60 to-gray-900 bg-no-repeat bg-cover")
      div(class="container mx-auto px-6 py-20")
        div(class="flex flex-col items-center text-center")
          img(src=cv.basics.image, alt="Profile Picture", class="w-32 h-32 md:w-40 md:h-40 rounded-full mb-6 border-4 border-gray-700 shadow-lg object-cover")
          h1(class="text-4xl md:text-6xl font-bold tracking-tight drop-shadow-xl font-montserrat")= cv.basics.name
          h2(class="text-xl md:text-2xl text-gray-400 mt-6 drop-shadow")= cv.basics.label
          if cv.basics.tagline
            p(class="text-lg text-gray-500 mt-4 italic drop-shadow-sm")= cv.basics.tagline
          nav(class="mt-8 flex flex-wrap justify-center gap-4 drop-shadow-md")
            a(href="#about" class="relative text-gray-300 hover:text-white transition-colors px-3 py-1 after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 after:bg-blue-400 after:transition-all after:duration-300 hover:after:w-full focus:after:w-full active:after:w-full after:rounded-full") About
            a(href="#experience" class="relative text-gray-300 hover:text-white transition-colors px-3 py-1 after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 after:bg-blue-400 after:transition-all after:duration-300 hover:after:w-full focus:after:w-full active:after:w-full after:rounded-full") Experience
            a(href="#projects" class="relative text-gray-300 hover:text-white transition-colors px-3 py-1 after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 after:bg-blue-400 after:transition-all after:duration-300 hover:after:w-full focus:after:w-full active:after:w-full after:rounded-full") Projects
            a(href="#volunteer" class="relative text-gray-300 hover:text-white transition-colors px-3 py-1 after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 after:bg-blue-400 after:transition-all after:duration-300 hover:after:w-full focus:after:w-full active:after:w-full after:rounded-full") Volunteer
            a(href="#testimonials" class="relative text-gray-300 hover:text-white transition-colors px-3 py-1 after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 after:bg-blue-400 after:transition-all after:duration-300 hover:after:w-full focus:after:w-full active:after:w-full after:rounded-full") Testimonials
            a(href="#contact" class="relative text-gray-300 hover:text-white transition-colors px-3 py-1 after:absolute after:left-0 after:bottom-0 after:w-0 after:h-0.5 after:bg-blue-400 after:transition-all after:duration-300 hover:after:w-full focus:after:w-full active:after:w-full after:rounded-full") Contact

    //- Main Content Wrapper
    div(class="main-content-wrapper container mx-auto px-4 sm:px-6 py-20 transition-all duration-500" style="max-width:1100px;margin-left:auto;margin-right:auto;" 2xl:style="max-width:1100px;margin-left:calc(15rem + 2vw);margin-right:auto;")
      div(class="lg:grid lg:grid-cols-3 lg:gap-12")
        //- Left/Main Column
        main(class="lg:col-span-2")
          //- About Section
          section#about
            h2(class="text-3xl md:text-4xl font-bold tracking-tighter mb-6") About Me
            div(class="prose prose-invert prose-lg max-w-none text-left")
              each para in cv.basics.summary
                p= para

          //- Experience Section
          section#experience(class="mt-20")
            h2(class="text-3xl md:text-4xl font-bold tracking-tighter mb-12") Work Experience
            div(class="relative border-l-2 border-gray-700 pl-8")
              each job, index in cv.work
                div(class="mb-12")
                  span(class="absolute -left-3 flex items-center justify-center w-6 h-6 bg-blue-600 rounded-full")
                    span(class="w-3 h-3 bg-white rounded-full")
                  h3(class="text-2xl font-bold")= job.position
                  p(class="text-lg text-gray-400")= `${job.name} | ${job.startDate} - ${job.endDate}`
                  if job.summary
                    p(class="mt-2 text-gray-300")= job.summary
                  if job.highlights
                    ul(class="list-disc list-inside mt-2 text-gray-300")
                      each highlight in job.highlights
                        li= highlight

          //- Projects Section
          section#projects(class="mt-20")
            h2(class="text-3xl md:text-4xl font-bold tracking-tighter mb-12") Personal Projects
            div(class="grid grid-cols-1 md:grid-cols-2 gap-8")
              each project in cv.projects
                div(class="bg-gray-800 rounded-lg overflow-hidden transform transition-transform hover:scale-105 shadow-lg flex flex-col")
                  if project.images && project.images.length > 0
                    img(src=project.images[0], alt=project.name, class="w-full h-48 object-cover")
                  div(class="p-6 flex flex-col flex-grow")
                    h3(class="text-xl font-bold")= project.name
                    p(class="text-gray-400 mt-2 flex-grow")= project.summary
                    div(class="mt-4")
                      if project.url
                        a(href=project.url, target="_blank", rel="noopener noreferrer", class="text-blue-400 hover:underline mr-4") View Project
                      if project.githubUrl
                        a(href=project.githubUrl, target="_blank", rel="noopener noreferrer", class="text-blue-400 hover:underline") View on GitHub

          //- Volunteer Section
          if cv.volunteer && cv.volunteer.length
            section#volunteer(class="mt-20")
              h2(class="text-3xl md:text-4xl font-bold tracking-tighter mb-12") Volunteer
              div(class="space-y-8")
                each vol in cv.volunteer
                  div(class="bg-gray-800 p-6 rounded-lg shadow-lg")
                    h3(class="text-2xl font-bold mb-2 flex items-center gap-2")
                      if vol.url
                        a(href=vol.url, target="_blank", rel="noopener noreferrer", class="text-blue-400 hover:underline")= vol.organization
                      else
                        = vol.organization
                      if vol.position
                        span(class="text-base text-gray-400 font-medium ml-2")= `â€“ ${vol.position}`
                    if vol.summary
                      p(class="text-gray-300 mt-2")= vol.summary

          //- Testimonials Section
          section#testimonials(class="mt-20")
            h2(class="text-3xl md:text-4xl font-bold tracking-tighter mb-12") Testimonials
            div(class="space-y-8")
              each ref in cv.references
                div(class="bg-gray-800 p-6 rounded-lg shadow-lg")
                  blockquote(class="border-l-4 border-blue-500 pl-4")
                    p(class="text-gray-300 italic")= ref.reference
                    footer(class="mt-4")
                      cite(class="font-bold not-italic")= ref.name
                      if ref.title
                        span(class="text-gray-400")= `, ${ref.title}`

        //- Right/Sidebar Column
        aside(class="lg:col-span-1 mt-20 lg:mt-0")
          //- Skills Section
          section#skills
            h2(class="text-2xl font-bold tracking-tight mb-6") Skills
            if cv.skills.summary
              p(class="text-gray-400 mb-6")= cv.skills.summary
            div(class="flex flex-wrap gap-2")
              each skill in cv.skills.sets
                - let colorClass = '';
                if (skill.name === 'Typescript')
                  - colorClass = 'bg-blue-700 text-white';
                else if (skill.name === 'React')
                  - colorClass = 'bg-cyan-600 text-white';
                else if (skill.name === 'Python')
                  - colorClass = 'bg-yellow-400 text-gray-900';
                else if (skill.name === 'Ruby on Rails')
                  - colorClass = 'bg-red-600 text-white';
                else if (skill.name === 'HTML5, CSS3, SASS')
                  - colorClass = 'bg-pink-500 text-white';
                else if (skill.name === 'LLMs/Prompt Engineering')
                  - colorClass = 'bg-purple-700 text-white';
                else if (skill.name === 'PostgreSQL, MySQL')
                  - colorClass = 'bg-emerald-700 text-white';
                else if (skill.name === 'Elixir')
                  - colorClass = 'bg-violet-700 text-white';
                else
                  - colorClass = 'bg-gray-700 text-white';
                span(class=`${colorClass} px-3 py-1 rounded-full text-sm shadow-md font-semibold transition-all duration-200`) #{skill.name}
            if cv.meta.resumeUrl
              div(class="mt-7")
                a(href=cv.meta.resumeUrl, target="_blank", class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors text-lg inline-block shadow-lg") Download Resume
            div(class="mt-8 flex flex-wrap items-center gap-4")
              each profile in cv.basics.profiles
                if profile.network === 'Stack Overflow' && profile.flair
                  a(href=profile.url, target="_blank")
                    img(src=profile.flair, alt="Stack Overflow Flair")
                if profile.network === 'Codewars' && profile.badge
                  a(href=profile.url, target="_blank")
                    img(src=profile.badge, alt="Codewars Badge")

          //- Education
          section#education(class="mt-12")
            h2(class="text-2xl font-bold tracking-tight mb-6") Education
            div(class="space-y-4")
              each course in cv.education
                div
                  h3(class="font-semibold")= course.area
                  p(class="text-gray-400")= `${course.institution} (${course.startDate} - ${course.endDate})`

          //- Languages
          section#languages(class="mt-12")
            h2(class="text-2xl font-bold tracking-tight mb-6") Languages
            div(class="space-y-2")
              each lang in cv.languages
                div
                  h3(class="font-semibold")= lang.language
                  p(class="text-gray-400")= lang.fluency

    //- Contact Section
    footer#contact(class="bg-black mt-20 py-20 text-center")
      div(class="container mx-auto px-6")
        h2(class="text-3xl md:text-4xl font-bold tracking-tighter mb-6") Get in Touch
        p(class="text-lg text-gray-400 mb-8") You can reach me via email or find me on social media.
        if cv.meta.resumeUrl
          a(href=cv.meta.resumeUrl, target="_blank", class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors text-lg inline-block mb-8") Download Resume
        div(class="flex justify-center gap-6 mt- flex-wrap")
          each profile in cv.basics.profiles
            a(href=profile.url, target="_blank", rel="noopener noreferrer", class="text-gray-400 hover:text-white transition-colors text-2xl")
              i(class="fab fa-#{profile.iconMame}")= profile.network
        if cv.meta.credits
          div(class="text-sm text-gray-600 mt-12")
            each credit in cv.meta.credits
              span.px-2
                if credit.url
                  a(href=credit.url, target="_blank", class="hover:underline")= credit.name
                else
                  = credit.name

    //- Jump to Top Button
    button#jump-to-top-btn(type="button" aria-label="Jump to top")
      svg(xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor")
        path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7")

    //- Font Awesome for social icons
    script(src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous")
    script(src="/diegosalazar/src/main.js")
    script.
      // Fallback for Jump to Top Button if main.js fails to load
      (function() {
        if (window.__jumpToTopPatched) return; // Prevent double-patching
        window.__jumpToTopPatched = true;
        function showJumpToTopBtn() {
          var btn = document.getElementById('jump-to-top-btn');
          if (!btn) return;
          if (window.scrollY > window.innerHeight * 0.5) {
            btn.classList.add('visible');
          } else {
            btn.classList.remove('visible');
          }
        }
        window.addEventListener('scroll', showJumpToTopBtn, { passive: true });
        window.addEventListener('resize', showJumpToTopBtn);
        document.addEventListener('DOMContentLoaded', function() {
          var btn = document.getElementById('jump-to-top-btn');
          if (btn) {
            btn.addEventListener('click', function() {
              window.scrollTo({ top: 0, behavior: 'smooth' });
            });
          }
          showJumpToTopBtn();
        });
      })();
